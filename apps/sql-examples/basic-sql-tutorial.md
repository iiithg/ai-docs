# Basic SQL Operations Tutorial

This tutorial will guide you through basic SQL CRUD operations: Create, Read, Update, and Delete. We'll use an employee management system example to demonstrate each operation.

## Step 1: CREATE (Create the Table & Insert Data)

This first step has two parts: defining the structure of our table and then populating it with initial data.

### Part A: Create the Table Structure

First, we need to define the schema for our employees table.

**Action:** Copy this code into the Supabase SQL Editor and press "RUN"

```sql
-- CREATE TABLE
-- This command defines the structure of our 'employees' table.
CREATE TABLE employees (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    name TEXT NOT NULL,
    role TEXT NOT NULL,
    department TEXT,
    hire_date DATE DEFAULT NOW()
);

-- Comments on the columns:
-- id: A unique, auto-incrementing number for each employee (BIGINT GENERATED BY DEFAULT AS IDENTITY). It's also the PRIMARY KEY, which ensures no two rows have the same id.
-- name: The employee's name. It cannot be empty (NOT NULL).
-- role: The employee's job title. It also cannot be empty (NOT NULL).
-- department: The department the employee works in. This is optional.
-- hire_date: The date the employee was hired. It defaults to the current date if not specified (DEFAULT NOW()).
```

**Expected Outcome:** After running this command, navigate to the "Table Editor" on the left sidebar. You will see the new employees table listed. Click on it to see that it has the correct columns but is currently empty.

### Part B: Insert Data into the Table

Now that we have an empty table, let's add some records. This is the Create part of CRUD, where we create new rows.

**Action:** Copy the INSERT statement below into the SQL Editor and press "RUN".

```sql
-- INSERT DATA
-- This command inserts three new rows into the 'employees' table.
INSERT INTO employees (name, role, department) VALUES
('Alice Johnson', 'Software Engineer', 'Technology'),
('Bob Smith', 'Marketing Manager', 'Marketing'),
('Charlie Brown', 'Data Analyst', 'Technology');

-- Comments on the statement:
-- INSERT INTO employees (...): Specifies that we are adding data to the 'employees' table and lists the columns we are providing values for.
-- VALUES (...), (...), (...): Provides the actual data for each row. Each set of parentheses represents one row.
-- Notice we don't provide 'id' or 'hire_date'. The database will automatically generate them for us based on our table definition.
```

**Expected Outcome:** Go back to the "Table Editor" and view the employees table. You will now see the three records you just inserted, complete with auto-generated id and hire_date values.

## Step 2: READ (Query the Data)

With data in our table, we can now retrieve it. This is the most common database operation.

**Action:** Copy the SELECT statement into the SQL Editor and run it. The results will appear in the panel below the editor.

```sql
-- READ ALL DATA
-- This command retrieves all columns and all rows from the 'employees' table.
SELECT * FROM employees;

-- Comments on the statement:
-- SELECT *: The asterisk (*) is a wildcard that means "all columns".
-- FROM employees: Specifies the table we want to read from.
```

**Expected Outcome:** The results panel will display the three employee records we inserted.

You can also run more specific queries to filter the data.

**Action:** Run this more specific query.

```sql
-- A MORE SPECIFIC READ QUERY
-- This command retrieves only the name and role of employees in the 'Technology' department.
SELECT name, role
FROM employees
WHERE department = 'Technology';
```

**Expected Outcome:** The results panel will now only show Alice Johnson and Charlie Brown, as they are the only employees in the 'Technology' department.

## Step 3: UPDATE (Modify Existing Data)

Let's say Alice Johnson gets a promotion. We need to update her role in the database.

**Action:** Copy the UPDATE statement into the SQL Editor and run it.

```sql
-- UPDATE DATA
-- This command modifies an existing record in the table.
UPDATE employees
SET role = 'Senior Software Engineer'
WHERE name = 'Alice Johnson';

-- Comments on the statement:
-- SET: Specifies the column(s) to modify and their new values.
-- WHERE: This clause is crucial. It identifies WHICH row(s) to update.
-- Without a WHERE clause, you would update EVERY row in the table!
```

**Action to Verify:** To confirm the change was successful, run the SELECT statement again.

```sql
-- Verify the update by reading all data again
SELECT * FROM employees;
```

**Expected Outcome:** In the results, you will see that Alice Johnson's role has been changed to "Senior Software Engineer".

## Step 4: DELETE (Remove Data)

Imagine employee Charlie Brown is leaving the company. We need to remove his record from the database.

**Action:** Copy the DELETE statement into the SQL Editor and run it.

```sql
-- DELETE DATA
-- This command removes a specific row from the table.
DELETE FROM employees
WHERE name = 'Charlie Brown';

-- Comments on the statement:
-- FROM employees: Specifies the table to delete from.
-- WHERE: This is extremely important. It specifies WHICH row to delete.
-- If you forget the WHERE clause, you will delete ALL data in the table! Be very careful.
```

**Action to Verify:** To prove that the record has been removed, run the SELECT statement one last time.

```sql
-- Verify the deletion by reading all data one last time
SELECT * FROM employees;
```

**Expected Outcome:** The results panel will now show only two employees: Alice and Bob. Charlie's record is gone.

## Additional Exercises

### Exercise 1: Insert More Employees

```sql
INSERT INTO employees (name, role, department) VALUES
('Diana Prince', 'Product Manager', 'Product'),
('Edward Norton', 'UX Designer', 'Design'),
('Fiona Green', 'DevOps Engineer', 'Technology');
```

### Exercise 2: Query All Employees in a Specific Department

```sql
SELECT name, role, hire_date
FROM employees
WHERE department = 'Technology'
ORDER BY hire_date DESC;
```

### Exercise 3: Update Multiple Fields

```sql
UPDATE employees
SET
    role = 'Lead UX Designer',
    department = 'Product'
WHERE name = 'Edward Norton';
```

### Exercise 4: Delete Records with Specific Conditions

```sql
DELETE FROM employees
WHERE department = 'Marketing' AND hire_date < '2024-01-01';
```

### Exercise 5: Aggregate Queries

```sql
-- Count employees by department
SELECT
    department,
    COUNT(*) as employee_count
FROM employees
GROUP BY department
ORDER BY employee_count DESC;
```

## Important Notes

1. **The importance of WHERE clause**: In UPDATE and DELETE statements, the WHERE clause is crucial. Forgetting it could update or delete all records!

2. **Backup important data**: Before performing deletion or bulk updates, consider backing up important data.

3. **Use transactions**: For multiple related operations, consider using transactions to ensure data consistency.

4. **Test queries**: Test your queries on test data before running them on production data.

## Next Steps

After completing this tutorial, you can explore more advanced SQL topics:

- JOINs (joining multiple tables)
- Subqueries
- Indexes
- Constraints
- Views
- Stored Procedures

Happy coding with SQL! ðŸŽ‰